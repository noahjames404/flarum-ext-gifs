{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@therealsujitk/flarum-ext-gifs/./src/forum/helpers/Giphy.js","webpack://@therealsujitk/flarum-ext-gifs/./src/forum/helpers/Tenor.js","webpack://@therealsujitk/flarum-ext-gifs/./node_modules/@babel/runtime/helpers/regeneratorRuntime.js","webpack://@therealsujitk/flarum-ext-gifs/./node_modules/@babel/runtime/helpers/typeof.js","webpack://@therealsujitk/flarum-ext-gifs/./node_modules/@babel/runtime/regenerator/index.js","webpack://@therealsujitk/flarum-ext-gifs/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://@therealsujitk/flarum-ext-gifs/webpack/bootstrap","webpack://@therealsujitk/flarum-ext-gifs/webpack/runtime/compat get default export","webpack://@therealsujitk/flarum-ext-gifs/webpack/runtime/define property getters","webpack://@therealsujitk/flarum-ext-gifs/webpack/runtime/hasOwnProperty shorthand","webpack://@therealsujitk/flarum-ext-gifs/webpack/runtime/make namespace object","webpack://@therealsujitk/flarum-ext-gifs/external root \"flarum.core.compat['common/extend']\"","webpack://@therealsujitk/flarum-ext-gifs/external root \"flarum.core.compat['common/app']\"","webpack://@therealsujitk/flarum-ext-gifs/external root \"flarum.core.compat['common/components/TextEditor']\"","webpack://@therealsujitk/flarum-ext-gifs/external root \"flarum.core.compat['common/components/TextEditorButton']\"","webpack://@therealsujitk/flarum-ext-gifs/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@therealsujitk/flarum-ext-gifs/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@therealsujitk/flarum-ext-gifs/external root \"flarum.core.compat['app']\"","webpack://@therealsujitk/flarum-ext-gifs/external root \"flarum.core.compat['common/components/Button']\"","webpack://@therealsujitk/flarum-ext-gifs/external root \"flarum.core.compat['common/Component']\"","webpack://@therealsujitk/flarum-ext-gifs/./src/forum/components/HomeButton.js","webpack://@therealsujitk/flarum-ext-gifs/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@therealsujitk/flarum-ext-gifs/external root \"flarum.core.compat['common/components/Tooltip']\"","webpack://@therealsujitk/flarum-ext-gifs/./src/forum/components/ResultButton.js","webpack://@therealsujitk/flarum-ext-gifs/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@therealsujitk/flarum-ext-gifs/./src/forum/components/GIFModal.js","webpack://@therealsujitk/flarum-ext-gifs/external root \"flarum.core.compat['Model']\"","webpack://@therealsujitk/flarum-ext-gifs/./src/forum/models/GIF.js","webpack://@therealsujitk/flarum-ext-gifs/./src/forum/index.js"],"sourcesContent":["export function initialize(apiKey, rating) {\r\n    this.baseUrl = 'https://api.giphy.com/v1';\r\n    this.defaultLimit = 10;\r\n\r\n    this.apiKey = apiKey;\r\n    this.rating = (() => {\r\n        if (rating === 'off') {\r\n            return 'r';\r\n        } else if (rating === 'low') {\r\n            return 'pg-13';\r\n        } else if (rating === 'medium') {\r\n            return 'pg';\r\n        } else {\r\n            return 'g';\r\n        }\r\n    })();\r\n}\r\n\r\nexport async function getTrendingTerms() {\r\n    var terms;\r\n    var url = `${this.baseUrl}/trending/searches?api_key=${this.apiKey}`;\r\n\r\n    await fetch(url)\r\n        .then((response) => response.json())\r\n        .then((content) => {\r\n            if (content.data === undefined) {\r\n                console.error('Sorry, there was something wrong with the Giphy API Key.');\r\n                return;\r\n            }\r\n\r\n            terms = content.data;\r\n        });\r\n\r\n    return terms;\r\n}\r\n\r\nexport async function getTrendingGIFs(offset, limit) {\r\n    var obj;\r\n    var url = `${this.baseUrl}/gifs/trending?api_key=${this.apiKey}&rating=${this.rating}&limit=${\r\n        limit || this.defaultLimit\r\n    }${offset ? `&offset=${offset}` : ''}`;\r\n\r\n    await fetch(url)\r\n        .then((response) => response.json())\r\n        .then((content) => {\r\n            if (content.data === undefined) {\r\n                console.error('Sorry, there was something wrong with the Tenor API Key.');\r\n                return;\r\n            }\r\n\r\n            obj = {\r\n                gifs: content.data,\r\n                next: offset + (limit || this.defaultLimit)\r\n            };\r\n        });\r\n\r\n    return obj;\r\n}\r\n\r\nexport async function getGIFs(query, offset, limit) {\r\n    var obj;\r\n    var url = `${this.baseUrl}/gifs/search?api_key=${this.apiKey}&rating=${this.rating}&q=${query}&limit=${\r\n        limit || this.defaultLimit\r\n    }${offset ? `&offset=${offset}` : ''}`;\r\n\r\n    await fetch(url)\r\n        .then((response) => response.json())\r\n        .then((content) => {\r\n            if (content.data === undefined) {\r\n                console.error('Sorry, there was something wrong with the Tenor API Key.');\r\n                return;\r\n            }\r\n\r\n            obj = {\r\n                gifs: content.data,\r\n                next: offset + (limit || this.defaultLimit)\r\n            };\r\n        });\r\n\r\n    return obj;\r\n}\r\n\r\nexport async function getGIFsByIDs(ids) {\r\n    var gifs;\r\n    var url = `${this.baseUrl}/gifs?api_key=${this.apiKey}&ids=${ids}`;\r\n\r\n    await fetch(url)\r\n        .then((response) => response.json())\r\n        .then((content) => {\r\n            gifs = content.data;\r\n        });\r\n\r\n    return gifs;\r\n}\r\n\r\nexport function extractGIF(gif) {\r\n    return {\r\n        id: gif.id,\r\n        title: gif.title,\r\n        url: gif.images.original.url\r\n    };\r\n}\r\n\r\nexport function getLimit() {\r\n    return this.defaultLimit;\r\n}\r\n","export function initialize(apiKey, rating) {\r\n    this.baseUrl = 'https://tenor.googleapis.com/v2';\r\n    this.defaultLimit = 10;\r\n\r\n    this.apiKey = apiKey;\r\n    this.rating = rating;\r\n}\r\n\r\nexport async function getTrendingTerms() {\r\n    var terms;\r\n    var url = `${this.baseUrl}/trending_terms?key=${this.apiKey}`;\r\n\r\n    await fetch(url)\r\n        .then((response) => response.json())\r\n        .then((content) => {\r\n            if (content.results === undefined) {\r\n                console.error('Sorry, there was something wrong with the Tenor API Key.');\r\n                return;\r\n            }\r\n\r\n            terms = content.results;\r\n        });\r\n\r\n    return terms;\r\n}\r\n\r\nexport async function getTrendingGIFs(pos, limit) {\r\n    var obj;\r\n    var url = `${this.baseUrl}/featured?key=${this.apiKey}&contentfilter=${this.rating}&media_filter=minimal&limit=${\r\n        limit || this.defaultLimit\r\n    }${pos ? `&pos=${pos}` : ''}`;\r\n\r\n    await fetch(url)\r\n        .then((response) => response.json())\r\n        .then((content) => {\r\n            if (content.results === undefined) {\r\n                console.error('Sorry, there was something wrong with the Tenor API Key.');\r\n                return;\r\n            }\r\n\r\n            obj = {\r\n                gifs: content.results,\r\n                next: content.next\r\n            };\r\n        });\r\n\r\n    return obj;\r\n}\r\n\r\nexport async function getGIFs(query, pos, limit) {\r\n    var obj;\r\n    var url = `${this.baseUrl}/search?key=${this.apiKey}&q=${query}&contentfilter=${\r\n        this.rating\r\n    }&media_filter=minimal&limit=${limit || this.defaultLimit}${pos ? `&pos=${pos}` : ''}`;\r\n\r\n    await fetch(url)\r\n        .then((response) => response.json())\r\n        .then((content) => {\r\n            if (content.results === undefined) {\r\n                console.error('Sorry, there was something wrong with the Tenor API Key.');\r\n                return;\r\n            }\r\n\r\n            obj = {\r\n                gifs: content.results,\r\n                next: content.next\r\n            };\r\n        });\r\n\r\n    return obj;\r\n}\r\n\r\nexport async function getGIFsByIDs(ids) {\r\n    var gifs;\r\n    var url = `${this.baseUrl}/posts?key=${this.apiKey}&id=${ids}&media_filter=minimal`;\r\n\r\n    await fetch(url)\r\n        .then((response) => response.json())\r\n        .then((content) => {\r\n            gifs = content.results;\r\n        });\r\n\r\n    return gifs;\r\n}\r\n\r\nexport function extractGIF(gif) { \r\n    \r\n    return {\r\n        id: gif.id,\r\n        title: gif.title,\r\n        // url: gif.media[0].gif.url\r\n        url: gif.media_formats.gif.url\r\n    };\r\n}\r\n\r\nexport function getLimit() {\r\n    return this.defaultLimit;\r\n}\r\n","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _regeneratorRuntime() {\n  \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return e;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var t,\n    e = {},\n    r = Object.prototype,\n    n = r.hasOwnProperty,\n    o = Object.defineProperty || function (t, e, r) {\n      t[e] = r.value;\n    },\n    i = \"function\" == typeof Symbol ? Symbol : {},\n    a = i.iterator || \"@@iterator\",\n    c = i.asyncIterator || \"@@asyncIterator\",\n    u = i.toStringTag || \"@@toStringTag\";\n  function define(t, e, r) {\n    return Object.defineProperty(t, e, {\n      value: r,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), t[e];\n  }\n  try {\n    define({}, \"\");\n  } catch (t) {\n    define = function define(t, e, r) {\n      return t[e] = r;\n    };\n  }\n  function wrap(t, e, r, n) {\n    var i = e && e.prototype instanceof Generator ? e : Generator,\n      a = Object.create(i.prototype),\n      c = new Context(n || []);\n    return o(a, \"_invoke\", {\n      value: makeInvokeMethod(t, r, c)\n    }), a;\n  }\n  function tryCatch(t, e, r) {\n    try {\n      return {\n        type: \"normal\",\n        arg: t.call(e, r)\n      };\n    } catch (t) {\n      return {\n        type: \"throw\",\n        arg: t\n      };\n    }\n  }\n  e.wrap = wrap;\n  var h = \"suspendedStart\",\n    l = \"suspendedYield\",\n    f = \"executing\",\n    s = \"completed\",\n    y = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var p = {};\n  define(p, a, function () {\n    return this;\n  });\n  var d = Object.getPrototypeOf,\n    v = d && d(d(values([])));\n  v && v !== r && n.call(v, a) && (p = v);\n  var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p);\n  function defineIteratorMethods(t) {\n    [\"next\", \"throw\", \"return\"].forEach(function (e) {\n      define(t, e, function (t) {\n        return this._invoke(e, t);\n      });\n    });\n  }\n  function AsyncIterator(t, e) {\n    function invoke(r, o, i, a) {\n      var c = tryCatch(t[r], t, o);\n      if (\"throw\" !== c.type) {\n        var u = c.arg,\n          h = u.value;\n        return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) {\n          invoke(\"next\", t, i, a);\n        }, function (t) {\n          invoke(\"throw\", t, i, a);\n        }) : e.resolve(h).then(function (t) {\n          u.value = t, i(u);\n        }, function (t) {\n          return invoke(\"throw\", t, i, a);\n        });\n      }\n      a(c.arg);\n    }\n    var r;\n    o(this, \"_invoke\", {\n      value: function value(t, n) {\n        function callInvokeWithMethodAndArg() {\n          return new e(function (e, r) {\n            invoke(t, n, e, r);\n          });\n        }\n        return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(e, r, n) {\n    var o = h;\n    return function (i, a) {\n      if (o === f) throw new Error(\"Generator is already running\");\n      if (o === s) {\n        if (\"throw\" === i) throw a;\n        return {\n          value: t,\n          done: !0\n        };\n      }\n      for (n.method = i, n.arg = a;;) {\n        var c = n.delegate;\n        if (c) {\n          var u = maybeInvokeDelegate(c, n);\n          if (u) {\n            if (u === y) continue;\n            return u;\n          }\n        }\n        if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) {\n          if (o === h) throw o = s, n.arg;\n          n.dispatchException(n.arg);\n        } else \"return\" === n.method && n.abrupt(\"return\", n.arg);\n        o = f;\n        var p = tryCatch(e, r, n);\n        if (\"normal\" === p.type) {\n          if (o = n.done ? s : l, p.arg === y) continue;\n          return {\n            value: p.arg,\n            done: n.done\n          };\n        }\n        \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(e, r) {\n    var n = r.method,\n      o = e.iterator[n];\n    if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y;\n    var i = tryCatch(o, e.iterator, r.arg);\n    if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y;\n    var a = i.arg;\n    return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y);\n  }\n  function pushTryEntry(t) {\n    var e = {\n      tryLoc: t[0]\n    };\n    1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e);\n  }\n  function resetTryEntry(t) {\n    var e = t.completion || {};\n    e.type = \"normal\", delete e.arg, t.completion = e;\n  }\n  function Context(t) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], t.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(e) {\n    if (e || \"\" === e) {\n      var r = e[a];\n      if (r) return r.call(e);\n      if (\"function\" == typeof e.next) return e;\n      if (!isNaN(e.length)) {\n        var o = -1,\n          i = function next() {\n            for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next;\n            return next.value = t, next.done = !0, next;\n          };\n        return i.next = i;\n      }\n    }\n    throw new TypeError(_typeof(e) + \" is not iterable\");\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), o(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) {\n    var e = \"function\" == typeof t && t.constructor;\n    return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name));\n  }, e.mark = function (t) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t;\n  }, e.awrap = function (t) {\n    return {\n      __await: t\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () {\n    return this;\n  }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) {\n    void 0 === i && (i = Promise);\n    var a = new AsyncIterator(wrap(t, r, n, o), i);\n    return e.isGeneratorFunction(r) ? a : a.next().then(function (t) {\n      return t.done ? t.value : a.next();\n    });\n  }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () {\n    return this;\n  }), define(g, \"toString\", function () {\n    return \"[object Generator]\";\n  }), e.keys = function (t) {\n    var e = Object(t),\n      r = [];\n    for (var n in e) r.push(n);\n    return r.reverse(), function next() {\n      for (; r.length;) {\n        var t = r.pop();\n        if (t in e) return next.value = t, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, e.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(e) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t);\n    },\n    stop: function stop() {\n      this.done = !0;\n      var t = this.tryEntries[0].completion;\n      if (\"throw\" === t.type) throw t.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(e) {\n      if (this.done) throw e;\n      var r = this;\n      function handle(n, o) {\n        return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o;\n      }\n      for (var o = this.tryEntries.length - 1; o >= 0; --o) {\n        var i = this.tryEntries[o],\n          a = i.completion;\n        if (\"root\" === i.tryLoc) return handle(\"end\");\n        if (i.tryLoc <= this.prev) {\n          var c = n.call(i, \"catchLoc\"),\n            u = n.call(i, \"finallyLoc\");\n          if (c && u) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          } else if (c) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n          } else {\n            if (!u) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(t, e) {\n      for (var r = this.tryEntries.length - 1; r >= 0; --r) {\n        var o = this.tryEntries[r];\n        if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) {\n          var i = o;\n          break;\n        }\n      }\n      i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null);\n      var a = i ? i.completion : {};\n      return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a);\n    },\n    complete: function complete(t, e) {\n      if (\"throw\" === t.type) throw t.arg;\n      return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y;\n    },\n    finish: function finish(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y;\n      }\n    },\n    \"catch\": function _catch(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.tryLoc === t) {\n          var n = r.completion;\n          if (\"throw\" === n.type) {\n            var o = n.arg;\n            resetTryEntry(r);\n          }\n          return o;\n        }\n      }\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(e, r, n) {\n      return this.delegate = {\n        iterator: values(e),\n        resultName: r,\n        nextLoc: n\n      }, \"next\" === this.method && (this.arg = t), y;\n    }\n  }, e;\n}\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(o);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/TextEditor'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/TextEditorButton'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","import Component from 'flarum/common/Component';\r\n\r\nexport default class SuggestionButton extends Component {\r\n    view() {\r\n        const attrs = this.attrs.attributes;\r\n\r\n        const title = attrs.title;\r\n        const url = attrs.url;\r\n        const icon = attrs.icon;\r\n        const onclick = attrs.onclick;\r\n\r\n        return (\r\n            <div style={url && `background-image: url(${url})`} onclick={onclick}>\r\n                {icon && <i class={icon}></i>} {title}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Tooltip'];","import app from 'flarum/app';\r\nimport Component from 'flarum/common/Component';\r\nimport Button from 'flarum/common/components/Button';\r\nimport Tooltip from 'flarum/common/components/Tooltip';\r\n\r\nconst prefix = 'therealsujitk-gifs';\r\n\r\nexport default class ResultButton extends Component {\r\n    oninit(vnode) {\r\n        super.oninit(vnode);\r\n\r\n        this.loading = false;\r\n        this.hidden = true; // Hide the image until the height has been adjusted\r\n        this.rowSpan = Math.random() * 15 + 25; // The number of rows the button covers (random before loading)\r\n\r\n        this.id;\r\n\r\n        $(window).resize(() => {\r\n            if (!this.hidden) {\r\n                this.setRowSpan(this.$('img', this)[0]);\r\n            }\r\n        });\r\n    }\r\n\r\n    view() {\r\n        const attrs = this.attrs.attributes;\r\n\r\n        this.id = attrs.id;\r\n        this.favourite = attrs.favourite;\r\n\r\n        const title = attrs.title;\r\n        const url = attrs.url;\r\n        const onclick = attrs.onclick;\r\n\r\n        if (attrs.isFavourite) {\r\n            if (!this.hidden) {\r\n                this.setRowSpan(this.$('img', this)[0]);\r\n            }\r\n        }\r\n\r\n        return (\r\n            <div style={this.rowSpan && `grid-row-end: span ${Math.round(this.rowSpan)}`}>\r\n                <img\r\n                    alt={title}\r\n                    src={url}\r\n                    style={this.hidden ? 'visibility: hidden' : ''}\r\n                    onclick={(e) => {\r\n                        onclick(e, this.id);\r\n                    }}\r\n                    onload={(e) => {\r\n                        this.setRowSpan(e.target);\r\n                    }}\r\n                />\r\n                <Tooltip\r\n                    showOnFocus={false}\r\n                    text={\r\n                        !attrs.isFavourite\r\n                            ? app.translator.trans(`${prefix}.forum.addFavourite`)\r\n                            : app.translator.trans(`${prefix}.forum.removeFavourite`)\r\n                    }\r\n                >\r\n                    <Button\r\n                        className={`Button Button--icon hasIcon`}\r\n                        style={this.hidden ? 'visibility: hidden' : ''}\r\n                        icon={!this.loading ? (attrs.isFavourite ? 'fas fa-star' : 'far fa-star') : ''}\r\n                        loading={this.loading}\r\n                        onclick={this.handleFavourite.bind(this)}\r\n                    />\r\n                </Tooltip>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    setRowSpan(img) {\r\n        this.rowSpan = img.height / 5 + 2;\r\n        this.hidden = false;\r\n    }\r\n\r\n    async handleFavourite() {\r\n        this.loading = true;\r\n        var result = await this.favourite(this.id);\r\n\r\n        if (result) {\r\n            this.attrs.attributes.isFavourite = !this.attrs.attributes.isFavourite;\r\n        }\r\n\r\n        this.loading = false;\r\n        m.redraw();\r\n    }\r\n}\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/Stream'];","import app from 'flarum/app';\r\nimport Button from 'flarum/common/components/Button';\r\nimport HomeButton from './HomeButton';\r\nimport Modal from 'flarum/common/components/Modal';\r\nimport ResultButton from './ResultButton';\r\nimport Stream from 'flarum/common/utils/Stream';\r\n\r\nconst prefix = 'therealsujitk-gifs';\r\n\r\nconst ENGINE_GIPHY = 'giphy';\r\nconst ENGINE_TENOR = 'tenor';\r\n\r\nconst CATEGORY_HOME = 'home';\r\nconst CATEGORY_FAVOURITE = 'favourite';\r\nconst CATEGORY_TRENDING = 'trending';\r\nconst CATEGORY_RESULT = 'result';\r\n\r\nexport default class GIFModal extends Modal {\r\n    oninit(vnode) {\r\n        super.oninit(vnode);\r\n\r\n        this.textArea = this.attrs.textArea;\r\n        this.baseUrl = app.forum.attribute('baseUrl');\r\n        this.engine = app.forum.attribute(`${prefix}.engine`) || 'giphy';\r\n        this.apiKey = app.forum.attribute(`${prefix}.api_key`);\r\n        this.rating = app.forum.attribute(`${prefix}.rating`) || 'off';\r\n\r\n        this.Engine = this.getEngine();\r\n        this.Engine.initialize(this.apiKey, this.rating);\r\n\r\n        this.isHomeVisible = true;\r\n        this.isFavouritesVisible = false;\r\n        this.isTrendingVisible = false;\r\n        this.isResultsVisible = false;\r\n\r\n        this.category = '';\r\n        this.query = Stream('');\r\n        this.next = null;\r\n\r\n        this.favourites = new Set();\r\n\r\n        this.homeButtons = new Array();\r\n        this.favouriteButtons = new Array();\r\n        this.resultButtons = new Array();\r\n\r\n        this.loadHomePage();\r\n        this.loadFavouritesPage();\r\n\r\n        this.loading = false;\r\n        this.reachedEnd = false;\r\n    }\r\n\r\n    className() {\r\n        return `${prefix}-modal`;\r\n    }\r\n\r\n    title() {\r\n        return 'Select a GIF to add to your post';\r\n    }\r\n\r\n    /**\r\n     * The body has four categories. HOME, FAVOURITES, TRENDING, RESULTS\r\n     * TRENDING and RESULTS use the same container\r\n     */\r\n    content() {\r\n        return (\r\n            <div className=\"Modal-body\">\r\n                <div style=\"display: flex;\">\r\n                    <Button\r\n                        id={`${prefix}-back-button`}\r\n                        className=\"Button Button--icon hasIcon\"\r\n                        style={!this.isHomeVisible ? '' : 'display: none'}\r\n                        icon=\"fas fa-long-arrow-alt-left\"\r\n                        onclick={this.showHome.bind(this)}\r\n                    />\r\n                    <span\r\n                        id={`${prefix}-category`}\r\n                        style={this.isFavouritesVisible || this.isTrendingVisible ? '' : 'display: none'}\r\n                    >\r\n                        {this.category && this.category}\r\n                    </span>\r\n                    <div\r\n                        id={`${prefix}-search-input`}\r\n                        className=\"Search-input\"\r\n                        style={this.isHomeVisible || this.isResultsVisible ? '' : 'display: none'}\r\n                    >\r\n                        <input\r\n                            className=\"FormControl\"\r\n                            placeholder={this.getPlaceholder()}\r\n                            value={this.query()}\r\n                            bidi={this.query}\r\n                            onkeydown={this.onkeydown.bind(this)}\r\n                        />\r\n                    </div>\r\n                    <Button\r\n                        id={`${prefix}-search-button`}\r\n                        className=\"Button Button--primary\"\r\n                        style={this.isHomeVisible || this.isResultsVisible ? '' : 'display: none'}\r\n                        onclick={() => {\r\n                            this.resetResultsPage();\r\n                            this.loadResultsPage();\r\n                        }}\r\n                    >\r\n                        {app.translator.trans(`${prefix}.forum.search`)}\r\n                    </Button>\r\n                </div>\r\n\r\n                <div className={`${prefix}-container`} style={this.isHomeVisible ? '' : 'display: none'}>\r\n                    {this.homeButtons && this.homeButtons.map((homeButton) => <HomeButton attributes={homeButton} />)}\r\n                </div>\r\n\r\n                <div\r\n                    className={`${prefix}-container`}\r\n                    style={this.isFavouritesVisible ? '' : 'display: none'}\r\n                    scrollTop={this.isTrendingVisible || this.isResultsVisible ? '0' : ''}\r\n                >\r\n                    {this.favouriteButtons &&\r\n                        this.favouriteButtons.map((favouriteButton) => <ResultButton attributes={favouriteButton} />)}\r\n                    <span id={`${prefix}-end`}>app.translator.trans(`${prefix}.forum.reachedEnd`)</span>\r\n                </div>\r\n\r\n                <div\r\n                    className={`${prefix}-container`}\r\n                    style={this.isTrendingVisible || this.isResultsVisible ? '' : 'display: none'}\r\n                    onscroll={this.loadMore.bind(this)}\r\n                    scrollTop={this.isTrendingVisible || this.isResultsVisible ? '0' : ''}\r\n                >\r\n                    {this.resultButtons &&\r\n                        this.resultButtons.map((resultButton) => <ResultButton attributes={resultButton} />)}\r\n                    <span id={`${prefix}-end`}>app.translator.trans(`${prefix}.forum.reachedEnd`)</span>\r\n                </div>\r\n\r\n                <div id={`${prefix}-footer`}>\r\n                    <img\r\n                        src={`${this.baseUrl}/assets/extensions/therealsujitk-gifs/powered_by_${this.engine}.svg`}\r\n                    ></img>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    getEngine() {\r\n        if (this.engine === ENGINE_TENOR) {\r\n            return require('../helpers/Tenor');\r\n        } else {\r\n            return require('../helpers/Giphy');\r\n        }\r\n    }\r\n\r\n    getPlaceholder() {\r\n        if (this.engine == ENGINE_TENOR) {\r\n            return app.translator.trans(`${prefix}.forum.searchTenor`);\r\n        } else {\r\n            return app.translator.trans(`${prefix}.forum.searchGiphy`);\r\n        }\r\n    }\r\n\r\n    showHome() {\r\n        this.isFavouritesVisible = false;\r\n        this.isTrendingVisible = false;\r\n        this.isResultsVisible = false;\r\n        this.isHomeVisible = true;\r\n\r\n        this.query('');\r\n        this.resetResultsPage();\r\n    }\r\n\r\n    showFavourites() {\r\n        this.isHomeVisible = false;\r\n        this.isResultsVisible = false;\r\n        this.isTrendingVisible = false;\r\n        this.isFavouritesVisible = true;\r\n\r\n        this.category = app.translator.trans(`${prefix}.forum.favourites`);\r\n    }\r\n\r\n    showTrending() {\r\n        this.isHomeVisible = false;\r\n        this.isFavouritesVisible = false;\r\n        this.isResultsVisible = false;\r\n        this.isTrendingVisible = true;\r\n\r\n        this.category = app.translator.trans(`${prefix}.forum.trending`);\r\n    }\r\n\r\n    showResults() {\r\n        this.isHomeVisible = false;\r\n        this.isFavouritesVisible = false;\r\n        this.isTrendingVisible = false;\r\n        this.isResultsVisible = true;\r\n    }\r\n\r\n    async loadHomePage() {\r\n        var favouritesButton = {\r\n            title: app.translator.trans(`${prefix}.forum.favourites`),\r\n            icon: 'fas fa-star',\r\n            onclick: () => {\r\n                this.showFavourites();\r\n            }\r\n        };\r\n\r\n        var trendingButton = {\r\n            title: app.translator.trans(`${prefix}.forum.trending`),\r\n            icon: 'fas fa-chart-line',\r\n            onclick: () => {\r\n                this.loadTrendingPage();\r\n            }\r\n        };\r\n\r\n        this.injectGIFs(null, 1, CATEGORY_HOME, 1); // Background for the trending button\r\n        this.homeButtons.push(favouritesButton, trendingButton);\r\n\r\n        var trendingTerms = await this.Engine.getTrendingTerms();\r\n\r\n        for (var i = 0; i < trendingTerms.length; ++i) {\r\n            var button = {\r\n                title: trendingTerms[i],\r\n                onclick: (e) => {\r\n                    this.query(e.target.innerText);\r\n                    this.loadResultsPage();\r\n                }\r\n            };\r\n\r\n            this.injectGIFs(trendingTerms[i], this.homeButtons.length, CATEGORY_HOME, 1);\r\n            this.homeButtons.push(button);\r\n        }\r\n    }\r\n\r\n    async loadFavouritesPage() {\r\n        app.store.find(prefix).then((response) => {\r\n            var gifIDs = '';\r\n\r\n            response.forEach((el) => {\r\n                var gifID = el.data.attributes.gifID;\r\n                gifIDs = `${gifIDs}${gifID},`;\r\n\r\n                this.favouriteButtons.push({});\r\n                this.favourites.add(gifID);\r\n            });\r\n\r\n            gifIDs = gifIDs.slice(0, -1);\r\n            response.length && this.injectGIFs(gifIDs, 0, CATEGORY_FAVOURITE, response.length);\r\n        });\r\n    }\r\n\r\n    async loadTrendingPage() {\r\n        this.showTrending();\r\n\r\n        for (var i = 0; i < this.Engine.getLimit(); ++i) {\r\n            var button = {};\r\n            this.resultButtons.push(button);\r\n        }\r\n\r\n        var startIndex = this.resultButtons.length - this.Engine.getLimit();\r\n        this.injectGIFs(null, startIndex, CATEGORY_TRENDING, null);\r\n        this.loading = false;\r\n    }\r\n\r\n    async loadResultsPage() {\r\n        this.showResults();\r\n\r\n        for (var i = 0; i < this.Engine.getLimit(); ++i) {\r\n            var button = {};\r\n            this.resultButtons.push(button);\r\n        }\r\n\r\n        var startIndex = this.resultButtons.length - this.Engine.getLimit();\r\n        this.injectGIFs(this.query(), startIndex, CATEGORY_RESULT, null);\r\n        this.loading = false;\r\n    }\r\n\r\n    resetResultsPage() {\r\n        this.resultButtons = new Array();\r\n        m.redraw.sync(); // WARNING: Make sure this method is not called during the mithril lifecycle\r\n\r\n        this.next = null;\r\n        this.reachedEnd = false;\r\n    }\r\n\r\n    loadMore(e) {\r\n        if ((!this.isResultsVisible && !this.isTrendingVisible) || this.loading || this.reachedEnd) {\r\n            return;\r\n        }\r\n\r\n        var scrollTop = e.target.scrollTop;\r\n        var scrollDistance = e.target.scrollHeight - e.target.offsetHeight;\r\n\r\n        if (scrollDistance != 0 && scrollTop >= scrollDistance - 200) {\r\n            this.loading = true;\r\n\r\n            if (this.isResultsVisible) {\r\n                this.loadResultsPage();\r\n            } else {\r\n                this.loadTrendingPage();\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * This function is sets the GIF id, title and url\r\n     * after it has been added to the DOM window\r\n     *\r\n     * @param   {string|null}   t               query, gif ids or null\r\n     * @param   {number}        startIndex      start index to set the properties\r\n     * @param   {string}        category        the category of the button\r\n     * @param   {number|null}   limit           the number of GIFs to be loaded\r\n     */\r\n    async injectGIFs(t, startIndex, category, limit) {\r\n        var gifs;\r\n\r\n        if (category === CATEGORY_FAVOURITE) {\r\n            gifs = await this.Engine.getGIFsByIDs(t);\r\n        } else if (category === CATEGORY_TRENDING || t == null) {\r\n            var obj = await this.Engine.getTrendingGIFs(this.next, limit);\r\n\r\n            gifs = obj.gifs;\r\n            !limit && (this.next = obj.next);\r\n        } else {\r\n            obj = await this.Engine.getGIFs(t, this.next, limit);\r\n\r\n            gifs = obj.gifs;\r\n            !limit && (this.next = obj.next);\r\n        }\r\n\r\n        for (var i = 0; i < (limit || this.Engine.getLimit()); ++i) {\r\n            if (gifs[i] === undefined) {\r\n                if (category === CATEGORY_FAVOURITE) {\r\n                    this.favouriteButtons.splice(startIndex + i);\r\n                } else if (category === CATEGORY_RESULT) {\r\n                    this.resultButtons.splice(startIndex + i);\r\n                    this.reachedEnd = true;\r\n                }\r\n\r\n                break;\r\n            }\r\n\r\n            var gif = this.Engine.extractGIF(gifs[i]);\r\n            var button = {};\r\n\r\n            button.id = gif.id;\r\n            button.title = gif.title;\r\n            button.url = gif.url;\r\n            button.isFavourite = this.favourites.has(gif.id);\r\n            button.onclick = (e, id) => {\r\n                var title = e.target.alt;\r\n                var url = e.target.src;\r\n                var embed = `![${this.engine[0].toUpperCase()}${this.engine.slice(1)} - ${title}](${url})`;\r\n\r\n                this.textArea.insertAtCursor(embed);\r\n                app.modal.close();\r\n\r\n                // For the Tenor API, it is required to register the shared GIF\r\n                if (this.engine === ENGINE_TENOR) {\r\n                    var url = `https://tenor.googleapis.com/v2/registershare?&key=${this.apiKey}${\r\n                        this.query() != '' ? `&q=${this.query()}` : ''\r\n                    }&id=${id}`;\r\n                    fetch(url);\r\n                }\r\n            };\r\n            button.favourite = async (id) => {\r\n                var result = false;\r\n\r\n                if (this.favourites.has(id)) {\r\n                    await app\r\n                        .request({\r\n                            method: 'DELETE',\r\n                            url: `${app.forum.attribute('apiUrl')}/${prefix}/${id}`\r\n                        })\r\n                        .then(() => {\r\n                            var index = this.favouriteButtons.findIndex((el) => el.id === id);\r\n                            this.favouriteButtons.splice(index, 1);\r\n                            this.favourites.delete(id);\r\n\r\n                            if (this.favouriteButtons.length == 0) {\r\n                                delete this.homeButtons[0].url;\r\n                            } else {\r\n                                this.homeButtons[0].url = this.favouriteButtons[0].url;\r\n                            }\r\n\r\n                            result = true;\r\n                        });\r\n                } else {\r\n                    await app.store\r\n                        .createRecord(prefix)\r\n                        .save({\r\n                            gifID: id\r\n                        })\r\n                        .then(() => {\r\n                            this.injectGIFs(id, 0, CATEGORY_FAVOURITE, 1);\r\n                            this.favourites.add(id);\r\n\r\n                            result = true;\r\n                        });\r\n                }\r\n\r\n                return result;\r\n            };\r\n\r\n            if (category === CATEGORY_HOME) {\r\n                this.homeButtons[startIndex + i].url = gif.url;\r\n            } else if (category === CATEGORY_FAVOURITE) {\r\n                if (this.favouriteButtons[startIndex + i] && this.favouriteButtons[startIndex + i].url === undefined) {\r\n                    Object.assign(this.favouriteButtons[startIndex + i], button);\r\n                } else {\r\n                    // If a new favourite is added, not using a placeholder causes lesser problems\r\n                    this.favouriteButtons.unshift(button);\r\n                }\r\n\r\n                // Changing the home button background\r\n                if (startIndex + i == 0) {\r\n                    this.homeButtons[0].url = gif.url;\r\n                }\r\n            } else {\r\n                Object.assign(this.resultButtons[startIndex + i], button);\r\n            }\r\n        }\r\n\r\n        m.redraw();\r\n    }\r\n\r\n    onsubmit(e) {\r\n        e.preventDefault();\r\n    }\r\n\r\n    onkeydown(e) {\r\n        if (e.key === 'Enter') {\r\n            this.query(this.query().trim());\r\n\r\n            if (this.query() === '') {\r\n                this.showHome();\r\n            } else {\r\n                this.resetResultsPage();\r\n                this.loadResultsPage();\r\n            }\r\n        }\r\n    }\r\n}\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['Model'];","import Model from 'flarum/Model';\r\n\r\nexport default class GIF extends Model {\r\n    gifID = Model.attribute('gifID');\r\n}\r\n","import { extend } from 'flarum/common/extend';\r\nimport app from 'flarum/common/app';\r\nimport TextEditor from 'flarum/common/components/TextEditor';\r\nimport TextEditorButton from 'flarum/common/components/TextEditorButton';\r\nimport GIFModal from './components/GIFModal';\r\nimport GIF from './models/GIF';\r\n\r\nconst prefix = 'therealsujitk-gifs';\r\n\r\napp.initializers.add(prefix, () => {\r\n    app.store.models[prefix] = GIF;\r\n\r\n    extend(TextEditor.prototype, 'toolbarItems', function (items) {\r\n        items.add(\r\n            'my-item',\r\n            <TextEditorButton\r\n                id={`${prefix}-toolbar-item`}\r\n                className=\"Button Button--icon Button--link hasIcon\"\r\n                title={app.translator.trans(`${prefix}.forum.label`)}\r\n                onclick={() => app.modal.show(GIFModal, { textArea: this.attrs.composer.editor })}\r\n            >\r\n                <svg\r\n                    id=\"therealsujitk-gifs-toolbar-item\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    xlink=\"http://www.w3.org/1999/xlink\"\r\n                    width=\"16pt\"\r\n                    height=\"7pt\"\r\n                    viewBox=\"0 0 16 7\"\r\n                    version=\"1.1\"\r\n                >\r\n                    <g>\r\n                        <path\r\n                            d=\"M 0.78125 7.042969 C 0.496094 6.933594 0.265625 6.738281 0.132812 6.480469 L 0 6.234375 L 0 0.875 L 0.132812 0.625 C 0.277344 0.355469 0.558594 0.128906 0.847656 0.0429688 C 0.957031 0.015625 1.71875 0 2.917969 0.0078125 L 4.808594 0.0234375 L 5.050781 0.15625 C 5.21875 0.246094 5.332031 0.355469 5.425781 0.511719 C 5.597656 0.800781 5.648438 0.992188 5.648438 1.410156 L 5.648438 1.753906 L 1.65625 1.753906 L 1.65625 5.355469 L 3.96875 5.355469 L 3.96875 3.554688 L 5.648438 3.554688 L 5.648438 4.800781 C 5.648438 5.484375 5.628906 6.117188 5.605469 6.207031 C 5.523438 6.527344 5.308594 6.808594 5.050781 6.953125 L 4.808594 7.085938 L 2.878906 7.09375 C 1.339844 7.105469 0.917969 7.09375 0.78125 7.042969 Z M 0.78125 7.042969\"\r\n                            fill=\"currentColor\"\r\n                        ></path>\r\n                        <path\r\n                            d=\"M 7.371094 3.554688 L 7.371094 0 L 9.050781 0 L 9.050781 7.109375 L 7.371094 7.109375 Z M 7.371094 3.554688\"\r\n                            fill=\"currentColor\"\r\n                        ></path>\r\n                        <path\r\n                            d=\"M 10.773438 3.554688 L 10.773438 0 L 15.855469 0 L 15.855469 1.753906 L 12.453125 1.753906 L 12.453125 2.988281 L 14.722656 2.988281 L 14.722656 4.742188 L 12.453125 4.742188 L 12.453125 7.109375 L 10.773438 7.109375 Z M 10.773438 3.554688\"\r\n                            fill=\"currentColor\"\r\n                        ></path>\r\n                    </g>\r\n                </svg>\r\n            </TextEditorButton>\r\n        );\r\n    });\r\n});\r\n"],"names":["initialize","apiKey","rating","this","baseUrl","defaultLimit","getTrendingTerms","_getTrendingTerms","apply","arguments","_asyncToGenerator","_regeneratorRuntime","_callee","terms","url","_context","prev","next","fetch","then","response","json","content","undefined","data","console","error","abrupt","stop","getTrendingGIFs","_x","_x2","_getTrendingGIFs","_callee2","offset","limit","obj","_this","_context2","gifs","getGIFs","_x3","_x4","_x5","_getGIFs","_callee3","query","_this2","_context3","getGIFsByIDs","_x6","_getGIFsByIDs","_callee4","ids","_context4","extractGIF","gif","id","title","images","original","getLimit","results","pos","media_formats","_typeof","require","module","exports","e","__esModule","t","r","Object","prototype","n","hasOwnProperty","o","defineProperty","value","i","Symbol","a","iterator","c","asyncIterator","u","toStringTag","define","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","type","arg","call","h","l","f","s","y","GeneratorFunction","GeneratorFunctionPrototype","p","d","getPrototypeOf","v","values","g","defineIteratorMethods","forEach","_invoke","AsyncIterator","invoke","resolve","__await","callInvokeWithMethodAndArg","Error","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","TypeError","resultName","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","isNaN","length","displayName","isGeneratorFunction","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","reverse","pop","charAt","slice","rval","handle","complete","finish","delegateYield","runtime","regeneratorRuntime","accidentalStrictMode","globalThis","Function","asyncGeneratorStep","gen","reject","_next","_throw","key","info","fn","self","args","err","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","definition","get","prop","flarum","core","compat","_setPrototypeOf","bind","_inheritsLoose","subClass","superClass","SuggestionButton","_Component","view","attrs","attributes","icon","onclick","m","style","class","Component","prefix","ResultButton","_proto","oninit","vnode","loading","hidden","rowSpan","Math","random","$","window","resize","setRowSpan","favourite","isFavourite","round","alt","src","onload","target","Tooltip","showOnFocus","text","app","trans","Button","className","handleFavourite","img","height","_handleFavourite","redraw","ENGINE_TENOR","CATEGORY_HOME","CATEGORY_FAVOURITE","CATEGORY_TRENDING","CATEGORY_RESULT","GIFModal","_Modal","textArea","attribute","engine","Engine","getEngine","isHomeVisible","isFavouritesVisible","isTrendingVisible","isResultsVisible","category","Stream","favourites","Set","homeButtons","Array","favouriteButtons","resultButtons","loadHomePage","loadFavouritesPage","reachedEnd","showHome","placeholder","getPlaceholder","bidi","onkeydown","resetResultsPage","loadResultsPage","map","homeButton","HomeButton","scrollTop","favouriteButton","onscroll","loadMore","resultButton","showFavourites","showTrending","showResults","_loadHomePage","favouritesButton","trendingButton","trendingTerms","button","loadTrendingPage","injectGIFs","innerText","_loadFavouritesPage","_this3","find","gifIDs","el","gifID","add","_loadTrendingPage","startIndex","_loadResultsPage","sync","scrollDistance","scrollHeight","offsetHeight","_injectGIFs","_callee6","_this4","_context6","splice","has","embed","toUpperCase","insertAtCursor","close","_ref","_callee5","result","_context5","index","findIndex","createRecord","save","assign","unshift","onsubmit","preventDefault","trim","Modal","GIF","_Model","_len","_key","concat","Model","models","extend","TextEditor","items","TextEditorButton","show","composer","editor","xmlns","xlink","width","viewBox","version","fill"],"sourceRoot":""}